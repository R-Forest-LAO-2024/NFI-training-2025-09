---
title: "Workshop on Data analysis with R for Lao PDRâ€™s fourth National Forest Inventory cycle"
subtitle: "Session 09: Aggregation"
date: "01-05 Sep 2025"
number-sections: true
toc: true
toc-depth: 2
highlight-style: github
theme: 
  light: flatly
  dark: darkly
format: 
  html: 
    toc-location: left
    embed-resources: true
  docx:
    reference-doc: custom-reference-doc.docx
  pdf: 
    documentclass: scrartcl
    papersize: A4
    colorlinks: true
editor: visual
---

# Setup {.unnumbered}

```{r}
#| label: setup
#| output: false
 
## Useful when sourcing script from Quarto doc.
if (!require(here)) install.packages("here"); library(here)

source(here("R/00-load-packages.R"))
source(here("R/fct-nfi-aggregate3-new.R"))

source(here("R/SOL-05-data-preparation.R"))
source(here("R/SOL-06-data-joins.R"))
source(here("R/SOL-07a-tree-weight.R"))
source(here("R/SOL-07b-tree-basal-area.R"))
```

# Session 09: Aggregate tree to forest type

**GOALS:**

1.  Calculate the mean aboveground biomass for all forest types using plot level land cover and systematic sampling.
2.  Calculate the mean aboveground biomass for all forest types using ratio estimators and 2-stages sampling for post-stratification.
3.  Compare estimates

<!-- Section 9.1 -->

## AGB with plot level land cover and systematic sampling

**Step-by-step**

1.  Sum tree AGB to subplots.

2.  Make plot majority LC class.

3.  Create plot level AGB based on mean subplot AGB.

4.  Create Forest type AGB as the mean of plot AGB per forest type.

5.  Calculate sampling error.

<!-- Section 9.2 -->

## AGB with ratio estimator and 2-stages sampling for post-stratification

<!-- Section 9.3 -->

## Compare AGB estimates from the 2 aggregation methods
